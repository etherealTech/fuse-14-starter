"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9107],{89107:(Me,U,r)=>{r.r(U),r.d(U,{TasksModule:()=>be});var d=r(4521),y=r(53737),t=(r(63191),r(5e3)),f=r(90508),R=(r(50727),r(77579)),Y=(r(49770),r(56451),r(39646)),D=r(54968),p=(r(70925),r(69808)),b=r(91314),N=r(29071),V=(r(91159),r(47429)),k=r(93075),A=r(67322),u=(r(68675),r(63900)),m=r(95698),T=r(39300),v=r(54004),C=r(18505);r(91005),r(50226);const ct={provide:new t.OlP("mat-autocomplete-scroll-strategy"),deps:[b.aV],useFactory:function lt(n){return()=>n.scrollStrategies.reposition()}};let dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[ct],imports:[[b.U8,f.Ng,f.BQ,p.ez],N.ZD,f.Ng,f.BQ]}),n})();var L=r(47423),q=r(77446),x=r(86856),z=r(4834),S=r(25245),$=r(98833),w=r(92181),gt=r(53170),ht=r(85899),_t=r(79814),ft=r(74107),I=r(2638),j=r(87238),Z=r(15439),vt=r(7853),kt=r(44466);let Tt=(()=>{class n{canDeactivate(e,i,s,a){let l=a.root;for(;l.firstChild;)l=l.firstChild;return!(a.url.includes("/tasks")&&!l.paramMap.get("id"))||e.closeDrawer().then(()=>!0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yt=r(70262),G=r(62843),Q=r(61135),xt=r(40520);let M=(()=>{class n{constructor(e){this._httpClient=e,this._tags=new Q.X(null),this._task=new Q.X(null),this._tasks=new Q.X(null)}get tags$(){return this._tags.asObservable()}get task$(){return this._task.asObservable()}get tasks$(){return this._tasks.asObservable()}getTags(){return this._httpClient.get("api/apps/tasks/tags").pipe((0,C.b)(e=>{this._tags.next(e)}))}createTag(e){return this.tags$.pipe((0,m.q)(1),(0,u.w)(i=>this._httpClient.post("api/apps/tasks/tag",{tag:e}).pipe((0,v.U)(s=>(this._tags.next([...i,s]),s)))))}updateTag(e,i){return this.tags$.pipe((0,m.q)(1),(0,u.w)(s=>this._httpClient.patch("api/apps/tasks/tag",{id:e,tag:i}).pipe((0,v.U)(a=>{const l=s.findIndex(c=>c.id===e);return s[l]=a,this._tags.next(s),a}))))}deleteTag(e){return this.tags$.pipe((0,m.q)(1),(0,u.w)(i=>this._httpClient.delete("api/apps/tasks/tag",{params:{id:e}}).pipe((0,v.U)(s=>{const a=i.findIndex(l=>l.id===e);return i.splice(a,1),this._tags.next(i),s}),(0,T.h)(s=>s),(0,u.w)(s=>this.tasks$.pipe((0,m.q)(1),(0,v.U)(a=>(a.forEach(l=>{const c=l.tags.findIndex(_=>_===e);c>-1&&l.tags.splice(c,1)}),s)))))))}getTasks(){return this._httpClient.get("api/apps/tasks/all").pipe((0,C.b)(e=>{this._tasks.next(e)}))}updateTasksOrders(e){return this._httpClient.patch("api/apps/tasks/order",{tasks:e})}searchTasks(e){return this._httpClient.get("api/apps/tasks/search",{params:{query:e}})}getTaskById(e){return this._tasks.pipe((0,m.q)(1),(0,v.U)(i=>{const s=i.find(a=>a.id===e)||null;return this._task.next(s),s}),(0,u.w)(i=>i?(0,Y.of)(i):(0,G._)("Could not found task with id of "+e+"!")))}createTask(e){return this.tasks$.pipe((0,m.q)(1),(0,u.w)(i=>this._httpClient.post("api/apps/tasks/task",{type:e}).pipe((0,v.U)(s=>(this._tasks.next([s,...i]),s)))))}updateTask(e,i){return this.tasks$.pipe((0,m.q)(1),(0,u.w)(s=>this._httpClient.patch("api/apps/tasks/task",{id:e,task:i}).pipe((0,v.U)(a=>{const l=s.findIndex(c=>c.id===e);return s[l]=a,this._tasks.next(s),a}),(0,u.w)(a=>this.task$.pipe((0,m.q)(1),(0,T.h)(l=>l&&l.id===e),(0,C.b)(()=>(this._task.next(a),a)))))))}deleteTask(e){return this.tasks$.pipe((0,m.q)(1),(0,u.w)(i=>this._httpClient.delete("api/apps/tasks/task",{params:{id:e}}).pipe((0,v.U)(s=>{const a=i.findIndex(l=>l.id===e);return i.splice(a,1),this._tasks.next(i),s}))))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(xt.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bt=(()=>{class n{constructor(e){this._tasksService=e}resolve(e,i){return this._tasksService.getTags()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(M))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),At=(()=>{class n{constructor(e){this._tasksService=e}resolve(e,i){return this._tasksService.getTasks()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(M))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ct=(()=>{class n{constructor(e,i){this._router=e,this._tasksService=i}resolve(e,i){return this._tasksService.getTaskById(e.paramMap.get("id")).pipe((0,yt.K)(s=>{console.error(s);const a=i.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(a),(0,G._)(s)}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.F0),t.LFG(M))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mt=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["tasks"]],decls:1,vars:0,template:function(e,i){1&e&&t._UZ(0,"router-outlet")},directives:[d.lC],encapsulation:2,changeDetection:0}),n})();var h=r(82722),Ot=r(94880),Dt=r(76859);const wt=["matDrawer"];function It(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"All tasks completed!"),t.qZA())}function Zt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.tasksCount.incomplete," remaining tasks")}}function Ft(n,o){1&n&&t._UZ(0,"div",28)}function Rt(n,o){1&n&&(t.ynx(0),t._UZ(1,"div",29),t.BQk())}function Lt(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",31),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:check-circle"))}function St(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",32),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:check-circle"))}function Qt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw(2).toggleCompleted(s)}),t.YNc(1,Lt,2,1,"ng-container",9),t.YNc(2,St,2,1,"ng-container",9),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.completed),t.xp6(1),t.Q6J("ngIf",!e.completed)}}function Et(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.title)}}function Jt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"span",33),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij("",t.lcZ(3,1,e.type)," title")}}function Bt(n,o){1&n&&t._UZ(0,"mat-icon",37),2&n&&t.Q6J("svgIcon","heroicons_solid:arrow-narrow-down")("title","Low")}function Pt(n,o){1&n&&t._UZ(0,"mat-icon",38),2&n&&t.Q6J("svgIcon","heroicons_solid:arrow-narrow-up")("title","High")}function Ut(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",34),t.YNc(2,Bt,1,2,"mat-icon",35),t.YNc(3,Pt,1,2,"mat-icon",36),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",0===e.priority),t.xp6(1),t.Q6J("ngIf",2===e.priority)}}function Yt(n,o){if(1&n&&(t.TgZ(0,"div",39),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.dueDate,"LLL dd")," ")}}const Nt=function(n,o,e){return{"h-12 text-lg font-semibold bg-gray-50 dark:bg-transparent":n,"h-16":o,"text-hint":e}},Vt=function(n){return[n]};function Ht(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19),t.YNc(2,Ft,1,0,"div",20),t.TgZ(3,"div",21),t.YNc(4,Rt,2,0,"ng-container",9),t.TgZ(5,"div",22),t._UZ(6,"mat-icon",23),t.qZA(),t.YNc(7,Qt,3,2,"button",24),t.TgZ(8,"a",25)(9,"div",26),t.YNc(10,Et,3,1,"ng-container",9),t.YNc(11,Jt,4,3,"ng-container",9),t.qZA(),t.YNc(12,Ut,4,2,"ng-container",9),t.YNc(13,Yt,3,4,"div",27),t.qZA()()(),t.BQk()),2&n){const e=o.$implicit,i=o.first,s=t.oxw(2);t.xp6(1),t.ekj("border-t",i),t.Q6J("id","task-"+e.id)("ngClass",t.kEZ(13,Nt,"section"===e.type,"task"===e.type,e.completed))("cdkDragLockAxis","y"),t.xp6(3),t.Q6J("ngIf",s.selectedTask&&s.selectedTask.id===e.id),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:menu"),t.xp6(1),t.Q6J("ngIf","task"===e.type),t.xp6(1),t.Q6J("routerLink",t.VKq(17,Vt,e.id)),t.xp6(2),t.Q6J("ngIf",e.title),t.xp6(1),t.Q6J("ngIf",!e.title),t.xp6(1),t.Q6J("ngIf","task"===e.type),t.xp6(1),t.Q6J("ngIf","task"===e.type)}}function qt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",17),t.NdJ("cdkDropListDropped",function(s){return t.CHM(e),t.oxw().dropped(s)}),t.YNc(2,Ht,14,19,"ng-container",18),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("cdkDropListData",e.tasks),t.xp6(1),t.Q6J("ngForOf",e.tasks)("ngForTrackBy",e.trackByFn)}}function zt(n,o){1&n&&(t.TgZ(0,"div",40),t._UZ(1,"mat-icon",41),t.TgZ(2,"div",42),t._uU(3,"Add a task to start planning!"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("svgIcon","iconsmind:bulleted_list"))}let K=(()=>{class n{constructor(e,i,s,a,l,c,_){this._activatedRoute=e,this._changeDetectorRef=i,this._document=s,this._router=a,this._tasksService=l,this._fuseMediaWatcherService=c,this._fuseNavigationService=_,this.tasksCount={completed:0,incomplete:0,total:0},this._unsubscribeAll=new R.x}ngOnInit(){this._tasksService.tags$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this._changeDetectorRef.markForCheck()}),this._tasksService.tasks$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.tasks=e,this.tasksCount.total=this.tasks.filter(i=>"task"===i.type).length,this.tasksCount.completed=this.tasks.filter(i=>"task"===i.type&&i.completed).length,this.tasksCount.incomplete=this.tasksCount.total-this.tasksCount.completed,this._changeDetectorRef.markForCheck(),setTimeout(()=>{const i=this._fuseNavigationService.getComponent("mainNavigation");i&&(this._fuseNavigationService.getItem("apps.tasks",i.navigation).subtitle=this.tasksCount.incomplete+" remaining tasks",i.refresh())})}),this._tasksService.task$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.selectedTask=e,this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaQueryChange$("(min-width: 1440px)").pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.drawerMode=e.matches?"side":"over",this._changeDetectorRef.markForCheck()}),(0,D.R)(this._document,"keydown").pipe((0,h.R)(this._unsubscribeAll),(0,T.h)(e=>(!0===e.ctrlKey||e.metaKey)&&("/"===e.key||"."===e.key))).subscribe(e=>{"/"===e.key&&this.createTask("task"),"."===e.key&&this.createTask("section")})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onBackdropClicked(){this._router.navigate(["./"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()}createTask(e){this._tasksService.createTask(e).subscribe(i=>{this._router.navigate(["./",i.id],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}toggleCompleted(e){e.completed=!e.completed,this._tasksService.updateTask(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()}dropped(e){(0,y.bA)(e.container.data,e.previousIndex,e.currentIndex),this._tasksService.updateTasksOrders(e.container.data).subscribe(),this._changeDetectorRef.markForCheck()}trackByFn(e,i){return i.id||e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(t.sBO),t.Y36(p.K0),t.Y36(d.F0),t.Y36(M),t.Y36(Ot.T),t.Y36(Dt.Jf))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tasks-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(wt,7),2&e){let s;t.iGM(s=t.CRH())&&(i.matDrawer=s.first)}},decls:26,vars:14,consts:[[1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-hidden"],[1,"flex-auto","h-full","bg-card","dark:bg-transparent",3,"backdropClick"],[1,"w-full","sm:w-128","dark:bg-gray-900",3,"mode","opened","position","disableClose"],["matDrawer",""],[1,"flex","flex-col"],[1,"flex","flex-col","flex-auto"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","sm:justify-between","py-8","px-6","md:px-8"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[1,"mt-4","sm:mt-0"],["mat-flat-button","",3,"color","matTooltip","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],["mat-flat-button","",1,"ml-3",3,"color","matTooltip","click"],[4,"ngIf","ngIfElse"],["noTasks",""],["cdkDropList","",1,"divide-y",3,"cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"group","w-full","select-none","hover:bg-gray-100","dark:hover:bg-hover",3,"id","ngClass","cdkDragLockAxis"],["class","flex flex-0 w-0 h-0",4,"cdkDragPreview"],[1,"relative","flex","items-center","h-full","pl-10"],["cdkDragHandle","",1,"md:hidden","absolute","flex","items-center","justify-center","inset-y-0","left-0","w-8","cursor-move","md:group-hover:flex"],[1,"icon-size-5","text-hint",3,"svgIcon"],["class","mr-2 -ml-2.5 leading-none","mat-icon-button","",3,"click",4,"ngIf"],[1,"flex","flex-auto","items-center","min-w-0","h-full","pr-7",3,"routerLink"],[1,"flex-auto","mr-2","truncate"],["class","text-sm whitespace-nowrap text-secondary",4,"ngIf"],[1,"flex","flex-0","w-0","h-0"],[1,"z-10","absolute","-top-px","right-0","-bottom-px","flex","flex-0","w-1","bg-primary"],["mat-icon-button","",1,"mr-2","-ml-2.5","leading-none",3,"click"],[1,"text-primary",3,"svgIcon"],[1,"text-hint",3,"svgIcon"],[1,"select-none","text-hint"],[1,"w-4","h-4","mr-3"],["class","icon-size-4 text-green-600 dark:text-green-400",3,"svgIcon","title",4,"ngIf"],["class","icon-size-4 text-red-600 dark:text-red-400",3,"svgIcon","title",4,"ngIf"],[1,"icon-size-4","text-green-600","dark:text-green-400",3,"svgIcon","title"],[1,"icon-size-4","text-red-600","dark:text-red-400",3,"svgIcon","title"],[1,"text-sm","whitespace-nowrap","text-secondary"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-drawer-container",1),t.NdJ("backdropClick",function(){return i.onBackdropClicked()}),t.TgZ(2,"mat-drawer",2,3),t._UZ(4,"router-outlet"),t.qZA(),t.TgZ(5,"mat-drawer-content",4)(6,"div",5)(7,"div",6)(8,"div")(9,"div",7),t._uU(10,"Tasks"),t.qZA(),t.TgZ(11,"div",8),t.YNc(12,It,2,0,"span",9),t.YNc(13,Zt,2,1,"span",9),t.qZA()(),t.TgZ(14,"div",10)(15,"button",11),t.NdJ("click",function(){return i.createTask("section")}),t._UZ(16,"mat-icon",12),t.TgZ(17,"span",13),t._uU(18,"Add Section"),t.qZA()(),t.TgZ(19,"button",14),t.NdJ("click",function(){return i.createTask("task")}),t._UZ(20,"mat-icon",12),t.TgZ(21,"span",13),t._uU(22,"Add Task"),t.qZA()()()(),t.YNc(23,qt,3,3,"ng-container",15),t.YNc(24,zt,4,1,"ng-template",null,16,t.W1O),t.qZA()()()()),2&e){const s=t.MAs(25);t.xp6(2),t.Q6J("mode",i.drawerMode)("opened",!1)("position","end")("disableClose",!0),t.xp6(10),t.Q6J("ngIf",0===i.tasksCount.incomplete),t.xp6(1),t.Q6J("ngIf",0!==i.tasksCount.incomplete),t.xp6(2),t.Q6J("color","accent")("matTooltip","Shortcut: Ctrl + ."),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(3),t.Q6J("color","primary")("matTooltip","Shortcut: Ctrl + /"),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:plus"),t.xp6(3),t.Q6J("ngIf",i.tasks&&i.tasks.length>0)("ngIfElse",s)}},directives:[I.kh,I.jA,d.lC,I.LW,p.O5,L.lW,j.gM,S.Hw,y.Wj,p.sg,y.Zt,p.mk,y.pV,y.Bh,d.yS],pipes:[p.rS,p.uU],encapsulation:2,changeDetection:0}),n})();var W=r(78372),$t=r(49858),jt=r(71683),Gt=r(3005);const Kt=["tagsPanelOrigin"],Wt=["tagsPanel"],Xt=["titleField"];function te(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",39),t._UZ(2,"mat-icon",7),t.TgZ(3,"span",40),t._uU(4,"MARK AS COMPLETE"),t.qZA()(),t.BQk()),2&n&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:check-circle"))}function ee(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",39),t._UZ(2,"mat-icon",41),t.TgZ(3,"span",40),t._uU(4,"MARK AS INCOMPLETE"),t.qZA()(),t.BQk()),2&n&&(t.xp6(2),t.Q6J("svgIcon","heroicons_outline:check-circle"))}function ie(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",43)(2,"span",44),t._uU(3),t.qZA()(),t.BQk()),2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.title)}}function ne(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ie,4,1,"ng-container",42),t.ALo(2,"fuseFindByKey"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,2,e.task.tags,"id",e.tags))("ngForTrackBy",e.trackByFn)}}function se(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",45),t.TgZ(2,"span",46),t._uU(3,"Edit"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:pencil-alt"))}function oe(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",45),t.TgZ(2,"span",46),t._uU(3,"Add"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus-circle"))}function ae(n,o){1&n&&t._UZ(0,"mat-icon",45),2&n&&t.Q6J("svgIcon","heroicons_solid:pencil-alt")}function re(n,o){1&n&&t._UZ(0,"mat-icon",45),2&n&&t.Q6J("svgIcon","heroicons_solid:check")}function le(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",56),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(3).toggleTaskTag(a)}),t._UZ(2,"mat-checkbox",57),t.TgZ(3,"div",58),t._uU(4),t.qZA()(),t.BQk()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(2),t.Q6J("color","primary")("checked",i.task.tags.includes(e.id)),t.xp6(2),t.Oqu(e.title)}}function ce(n,o){if(1&n&&(t.ynx(0),t.YNc(1,le,5,3,"ng-container",42),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function pe(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"mat-form-field",60)(3,"input",61),t.NdJ("input",function(s){const l=t.CHM(e).$implicit;return t.oxw(3).updateTagTitle(l,s)}),t.qZA(),t.TgZ(4,"button",62),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw(3).deleteTag(a)}),t._UZ(5,"mat-icon",63),t.qZA()()(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(3),t.Q6J("value",e.title),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:trash")}}function ue(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",59),t.YNc(2,pe,6,2,"ng-container",42),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.filteredTags)("ngForTrackBy",e.trackByFn)}}function me(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",64),t.NdJ("click",function(){t.CHM(e),t.oxw();const s=t.MAs(6);return t.oxw().createTag(s.value),s.value=""}),t._UZ(1,"mat-icon",65),t.TgZ(2,"div",66),t._uU(3,'Create "'),t.TgZ(4,"b"),t._uU(5),t.qZA(),t._uU(6,'"'),t.qZA()()}if(2&n){t.oxw();const e=t.MAs(6);t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus-circle"),t.xp6(4),t.Oqu(e.value)}}function de(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",47)(1,"div",48)(2,"div",5),t._UZ(3,"mat-icon",45),t.TgZ(4,"div",49)(5,"input",50,51),t.NdJ("input",function(s){return t.CHM(e),t.oxw().filterTags(s)})("keydown",function(s){return t.CHM(e),t.oxw().filterTagsInputKeyDown(s)}),t.qZA()()(),t.TgZ(7,"button",52),t.NdJ("click",function(){return t.CHM(e),t.oxw().toggleTagsEditMode()}),t.YNc(8,ae,1,1,"mat-icon",53),t.YNc(9,re,1,1,"mat-icon",53),t.qZA()(),t.TgZ(10,"div",54),t.YNc(11,ce,2,2,"ng-container",4),t.YNc(12,ue,3,2,"ng-container",4),t.YNc(13,me,7,2,"div",55),t.qZA()()}if(2&n){const e=t.MAs(6),i=t.oxw();t.xp6(3),t.Q6J("svgIcon","heroicons_solid:search"),t.xp6(2),t.Q6J("maxLength",30),t.xp6(3),t.Q6J("ngIf",!i.tagsEditMode),t.xp6(1),t.Q6J("ngIf",i.tagsEditMode),t.xp6(2),t.Q6J("ngIf",!i.tagsEditMode),t.xp6(1),t.Q6J("ngIf",i.tagsEditMode),t.xp6(1),t.Q6J("ngIf",i.shouldShowCreateTagButton(e.value))}}function ge(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",32),t.TgZ(2,"span",67),t._uU(3,"Low"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-down"))}function he(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",68),t.TgZ(2,"span",67),t._uU(3,"Normal"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:minus"))}function _e(n,o){1&n&&(t.ynx(0),t._UZ(1,"mat-icon",68),t.TgZ(2,"span",67),t._uU(3,"High"),t.qZA(),t.BQk()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-up"))}function fe(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"date"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(t.xi3(2,1,e.task.dueDate,"longDate"))}}function ve(n,o){1&n&&(t.ynx(0),t._uU(1,"Not set"),t.BQk())}const ke=function(){return["../"]},Te=function(n,o,e){return{"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":n,"text-gray-800 bg-gray-200 dark:text-gray-100 dark:bg-gray-500":o,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":e}},E=function(n){return{"bg-hover":n}},ye=function(n,o,e){return{"text-gray-500 bg-gray-100 dark:text-gray-300 dark:bg-gray-700":n,"text-green-800 bg-green-200 dark:text-green-100 dark:bg-green-500":o,"text-red-800 bg-red-200 dark:text-red-100 dark:bg-red-500":e}},xe=[{path:"",component:Mt,resolve:{tags:bt},children:[{path:"",component:K,resolve:{tasks:At},children:[{path:":id",component:(()=>{class n{constructor(e,i,s,a,l,c,_,J,B,P){this._activatedRoute=e,this._changeDetectorRef=i,this._formBuilder=s,this._fuseConfirmationService=a,this._renderer2=l,this._router=c,this._tasksListComponent=_,this._tasksService=J,this._overlay=B,this._viewContainerRef=P,this.tagsEditMode=!1,this._unsubscribeAll=new R.x}ngOnInit(){this._tasksListComponent.matDrawer.open(),this.taskForm=this._formBuilder.group({id:[""],type:[""],title:[""],notes:[""],completed:[!1],dueDate:[null],priority:[0],tags:[[]],order:[0]}),this._tasksService.tags$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.tags=e,this.filteredTags=e,this._changeDetectorRef.markForCheck()}),this._tasksService.tasks$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this.tasks=e,this._changeDetectorRef.markForCheck()}),this._tasksService.task$.pipe((0,h.R)(this._unsubscribeAll)).subscribe(e=>{this._tasksListComponent.matDrawer.open(),this.task=e,this.taskForm.patchValue(e,{emitEvent:!1}),this._changeDetectorRef.markForCheck()}),this.taskForm.valueChanges.pipe((0,C.b)(e=>{this.task=(0,$t.Z)(this.task,e)}),(0,W.b)(300),(0,h.R)(this._unsubscribeAll)).subscribe(e=>{this._tasksService.updateTask(e.id,e).subscribe(),this._changeDetectorRef.markForCheck()}),this._router.events.pipe((0,h.R)(this._unsubscribeAll),(0,T.h)(e=>e instanceof d.m2)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngAfterViewInit(){this._tasksListComponent.matDrawer.openedChange.pipe((0,h.R)(this._unsubscribeAll),(0,T.h)(e=>e)).subscribe(()=>{this._titleField.nativeElement.focus()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.dispose()}closeDrawer(){return this._tasksListComponent.matDrawer.close()}toggleCompleted(){const e=this.taskForm.get("completed");e.setValue(!e.value)}openTagsPanel(){this._tagsPanelOverlayRef=this._overlay.create({backdropClass:"",hasBackdrop:!0,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().flexibleConnectedTo(this._tagsPanelOrigin.nativeElement).withFlexibleDimensions(!0).withViewportMargin(64).withLockedPosition(!0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}])}),this._tagsPanelOverlayRef.attachments().subscribe(()=>{this._tagsPanelOverlayRef.overlayElement.querySelector("input").focus()});const e=new V.UE(this._tagsPanel,this._viewContainerRef);this._tagsPanelOverlayRef.attach(e),this._tagsPanelOverlayRef.backdropClick().subscribe(()=>{this._tagsPanelOverlayRef&&this._tagsPanelOverlayRef.hasAttached()&&(this._tagsPanelOverlayRef.detach(),this.filteredTags=this.tags,this.tagsEditMode=!1),e&&e.isAttached&&e.detach()})}toggleTagsEditMode(){this.tagsEditMode=!this.tagsEditMode}filterTags(e){const i=e.target.value.toLowerCase();this.filteredTags=this.tags.filter(s=>s.title.toLowerCase().includes(i))}filterTagsInputKeyDown(e){if("Enter"!==e.key)return;if(0===this.filteredTags.length)return this.createTag(e.target.value),void(e.target.value="");const i=this.filteredTags[0];this.task.tags.find(a=>a===i.id)?this.deleteTagFromTask(i):this.addTagToTask(i)}createTag(e){this._tasksService.createTag({title:e}).subscribe(s=>{this.addTagToTask(s)})}updateTagTitle(e,i){e.title=i.target.value,this._tasksService.updateTag(e.id,e).pipe((0,W.b)(300)).subscribe(),this._changeDetectorRef.markForCheck()}deleteTag(e){this._tasksService.deleteTag(e.id).subscribe(),this._changeDetectorRef.markForCheck()}addTagToTask(e){this.task.tags.unshift(e.id),this.taskForm.get("tags").patchValue(this.task.tags),this._changeDetectorRef.markForCheck()}deleteTagFromTask(e){this.task.tags.splice(this.task.tags.findIndex(i=>i===e.id),1),this.taskForm.get("tags").patchValue(this.task.tags),this._changeDetectorRef.markForCheck()}toggleTaskTag(e){this.task.tags.includes(e.id)?this.deleteTagFromTask(e):this.addTagToTask(e)}shouldShowCreateTagButton(e){return!(""===e||this.tags.findIndex(i=>i.title.toLowerCase()===e.toLowerCase())>-1)}setTaskPriority(e){this.taskForm.get("priority").setValue(e)}isOverdue(){return Z(this.task.dueDate,Z.ISO_8601).isBefore(Z(),"days")}deleteTask(){this._fuseConfirmationService.open({title:"Delete task",message:"Are you sure you want to delete this task? This action cannot be undone!",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{if("confirmed"===i){const s=this.task.id,a=this.tasks.findIndex(_=>_.id===s),l=a+(a===this.tasks.length-1?-1:1),c=1===this.tasks.length&&this.tasks[0].id===s?null:this.tasks[l].id;this._tasksService.deleteTask(s).subscribe(_=>{!_||this._router.navigate(c?["../",c]:["../"],{relativeTo:this._activatedRoute})}),this._changeDetectorRef.markForCheck()}})}trackByFn(e,i){return i.id||e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(t.sBO),t.Y36(k.qu),t.Y36(jt.R),t.Y36(t.Qsj),t.Y36(d.F0),t.Y36(K),t.Y36(M),t.Y36(b.aV),t.Y36(t.s_b))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tasks-details"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Kt,5),t.Gf(Wt,5),t.Gf(Xt,5)),2&e){let s;t.iGM(s=t.CRH())&&(i._tagsPanelOrigin=s.first),t.iGM(s=t.CRH())&&(i._tagsPanel=s.first),t.iGM(s=t.CRH())&&(i._titleField=s.first)}},decls:82,vars:50,consts:[[1,"flex","flex-auto"],[1,"flex","flex-col","flex-auto","p-6","pt-10","sm:p-8","sm:pt-10","overflow-y-auto",3,"formGroup"],[1,"flex","items-center","justify-between","-mt-3","-ml-4"],["mat-button","",1,"pr-4","pl-3.5",3,"click"],[4,"ngIf"],[1,"flex","items-center"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["moreMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-icon-button","",3,"routerLink"],[1,"mt-6","mb-8"],[1,"fuse-mat-textarea","fuse-mat-no-subscript","w-full"],["matInput","","matTextareaAutosize","",3,"formControlName","spellcheck"],["titleField",""],[1,"mt-8"],[1,"font-medium","mb-1.5"],[1,"flex","flex-wrap","items-center","-m-1.5"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","cursor-pointer","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700",3,"click"],["tagsPanelOrigin",""],["tagsPanel",""],[1,"flex","flex-wrap","items-center","mt-8"],[1,"font-medium"],[1,"flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","matMenuTriggerFor"],["priorityMenu","matMenu"],["mat-menu-item","",3,"ngClass","click"],[1,"inline-flex","items-center","justify-between","w-full","min-w-30","leading-5"],[1,"mr-0","icon-size-4","text-green-600","dark:text-green-500",3,"svgIcon"],[1,"mr-0","icon-size-4","text-gray-600","dark:text-gray-500",3,"svgIcon"],[1,"mr-0","icon-size-4","text-red-600","dark:text-red-500",3,"svgIcon"],[1,"ml-6"],[1,"relative","flex","items-center","mt-1.5","px-4","leading-9","rounded-full","cursor-pointer",3,"ngClass","click"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-2","text-md","font-medium"],[1,"fuse-mat-no-subscript","fuse-mat-dense","invisible","absolute","inset-0","-mt-2.5","opacity-0","pointer-events-none"],["matInput","",3,"formControlName","matDatepicker"],["dueDatePicker",""],["mat-button","","matDatepickerCancel","",3,"click"],["mat-flat-button","","matDatepickerApply","",1,"",3,"color"],[1,"flex","items-center","justify-center"],[1,"ml-2","font-semibold"],[1,"text-primary",3,"svgIcon"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-center","px-4","m-1.5","rounded-full","leading-9","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"text-md","font-medium","whitespace-nowrap"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-1.5","text-md","font-medium","whitespace-nowrap"],[1,"w-60","rounded","border","shadow-md","bg-card"],[1,"flex","items-center","m-3","mr-2"],[1,"ml-2"],["type","text","placeholder","Enter tag name",1,"w-full","min-w-0","py-1","border-0",3,"maxLength","input","keydown"],["newTagInput",""],["mat-icon-button","",1,"ml-1",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-col","max-h-64","py-2","border-t","overflow-y-auto"],["class","flex items-center h-10 min-h-10 -ml-0.5 pl-4 pr-3 leading-none cursor-pointer hover:bg-hover","matRipple","",3,"click",4,"ngIf"],["matRipple","",1,"flex","items-center","h-10","min-h-10","px-4","cursor-pointer","hover:bg-hover",3,"click"],[1,"flex","items-center","h-10","min-h-10",3,"color","checked"],[1,"ml-1"],[1,"py-2","space-y-2"],[1,"fuse-mat-dense","fuse-mat-no-subscript","w-full","mx-4"],["matInput","",3,"value","input"],["mat-icon-button","","matSuffix","",3,"click"],[1,"icon-size-5","ml-2",3,"svgIcon"],["matRipple","",1,"flex","items-center","h-10","min-h-10","-ml-0.5","pl-4","pr-3","leading-none","cursor-pointer","hover:bg-hover",3,"click"],[1,"mr-2","icon-size-5",3,"svgIcon"],[1,"break-all"],[1,"ml-2","mr-1","text-md","font-medium"],[1,"icon-size-4","text-current",3,"svgIcon"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return i.toggleCompleted()}),t.YNc(4,te,5,1,"ng-container",4),t.YNc(5,ee,5,1,"ng-container",4),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t._UZ(8,"mat-icon",7),t.qZA(),t.TgZ(9,"mat-menu",null,8)(11,"button",9),t.NdJ("click",function(){return i.deleteTask()}),t._UZ(12,"mat-icon",7),t.TgZ(13,"span"),t._uU(14),t.qZA()()(),t.TgZ(15,"button",10),t._UZ(16,"mat-icon",7),t.qZA()()(),t._UZ(17,"mat-divider",11),t.TgZ(18,"div")(19,"mat-form-field",12)(20,"mat-label"),t._uU(21),t.qZA(),t._UZ(22,"textarea",13,14),t.qZA()(),t.TgZ(24,"div",15)(25,"div",16),t._uU(26,"Tags"),t.qZA(),t.TgZ(27,"div",17),t.YNc(28,ne,3,6,"ng-container",4),t.TgZ(29,"div",18,19),t.NdJ("click",function(){return i.openTagsPanel()}),t.YNc(31,se,4,1,"ng-container",4),t.YNc(32,oe,4,1,"ng-container",4),t.YNc(33,de,14,7,"ng-template",null,20,t.W1O),t.qZA()()(),t.TgZ(35,"div",21)(36,"div")(37,"div",22),t._uU(38,"Priority"),t.qZA(),t.TgZ(39,"div",23),t.YNc(40,ge,4,1,"ng-container",4),t.YNc(41,he,4,1,"ng-container",4),t.YNc(42,_e,4,1,"ng-container",4),t.qZA(),t.TgZ(43,"mat-menu",null,24)(45,"button",25),t.NdJ("click",function(){return i.setTaskPriority(0)}),t.TgZ(46,"span",26)(47,"span",22),t._uU(48,"Low"),t.qZA(),t._UZ(49,"mat-icon",27),t.qZA()(),t.TgZ(50,"button",25),t.NdJ("click",function(){return i.setTaskPriority(1)}),t.TgZ(51,"span",26)(52,"span",22),t._uU(53,"Normal"),t.qZA(),t._UZ(54,"mat-icon",28),t.qZA()(),t.TgZ(55,"button",25),t.NdJ("click",function(){return i.setTaskPriority(2)}),t.TgZ(56,"span",26)(57,"span",22),t._uU(58,"High"),t.qZA(),t._UZ(59,"mat-icon",29),t.qZA()()()(),t.TgZ(60,"div",30)(61,"div",22),t._uU(62,"Due date"),t.qZA(),t.TgZ(63,"div",31),t.NdJ("click",function(){return t.CHM(s),t.MAs(71).open()}),t._UZ(64,"mat-icon",32),t.TgZ(65,"span",33),t.YNc(66,fe,3,4,"ng-container",4),t.YNc(67,ve,2,0,"ng-container",4),t.qZA(),t.TgZ(68,"mat-form-field",34),t._UZ(69,"input",35),t.TgZ(70,"mat-datepicker",null,36)(72,"mat-datepicker-actions")(73,"button",37),t.NdJ("click",function(){return i.taskForm.get("dueDate").setValue(null)}),t._uU(74,"Clear "),t.qZA(),t.TgZ(75,"button",38),t._uU(76,"Select "),t.qZA()()()()()()(),t.TgZ(77,"div",15)(78,"mat-form-field",12)(79,"mat-label"),t._uU(80,"Notes"),t.qZA(),t._UZ(81,"textarea",13),t.qZA()()()()}if(2&e){const s=t.MAs(10),a=t.MAs(44),l=t.MAs(71);t.xp6(1),t.Q6J("formGroup",i.taskForm),t.xp6(3),t.Q6J("ngIf",!i.taskForm.get("completed").value),t.xp6(1),t.Q6J("ngIf",i.taskForm.get("completed").value),t.xp6(2),t.Q6J("matMenuTriggerFor",s),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:dots-vertical"),t.xp6(4),t.Q6J("svgIcon","heroicons_outline:trash"),t.xp6(2),t.hij("Delete ","task"===i.task.type?"task":"section",""),t.xp6(1),t.Q6J("routerLink",t.DdM(35,ke)),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(5),t.Oqu("task"===i.task.type?"Task title":"Section title"),t.xp6(1),t.Q6J("formControlName","title")("spellcheck",!1),t.xp6(6),t.Q6J("ngIf",i.task.tags.length),t.xp6(3),t.Q6J("ngIf",i.task.tags.length),t.xp6(1),t.Q6J("ngIf",!i.task.tags.length),t.xp6(7),t.Q6J("ngClass",t.kEZ(36,Te,0===i.task.priority,1===i.task.priority,2===i.task.priority))("matMenuTriggerFor",a),t.xp6(1),t.Q6J("ngIf",0===i.task.priority),t.xp6(1),t.Q6J("ngIf",1===i.task.priority),t.xp6(1),t.Q6J("ngIf",2===i.task.priority),t.xp6(3),t.Q6J("ngClass",t.VKq(40,E,0===i.task.priority)),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-down"),t.xp6(1),t.Q6J("ngClass",t.VKq(42,E,1===i.task.priority)),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:minus"),t.xp6(1),t.Q6J("ngClass",t.VKq(44,E,2===i.task.priority)),t.xp6(4),t.Q6J("svgIcon","heroicons_solid:arrow-narrow-up"),t.xp6(4),t.Q6J("ngClass",t.kEZ(46,ye,!i.task.dueDate,i.task.dueDate&&!i.isOverdue(),i.task.dueDate&&i.isOverdue())),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.Q6J("ngIf",i.task.dueDate),t.xp6(1),t.Q6J("ngIf",!i.task.dueDate),t.xp6(2),t.Q6J("formControlName","dueDate")("matDatepicker",l),t.xp6(6),t.Q6J("color","primary"),t.xp6(6),t.Q6J("formControlName","notes")("spellcheck",!1)}},directives:[k._Y,k.JL,k.sg,L.lW,p.O5,S.Hw,w.p6,w.VK,w.OP,d.rH,z.d,A.KE,A.hX,$.Nt,k.Fj,k.JJ,k.u,p.sg,f.wG,q.oG,A.R9,p.mk,x.hl,x.Mq,x.M5,x.dp,x.DK],pipes:[Gt.K,p.uU],encapsulation:2,changeDetection:0}),n})(),resolve:{task:Ct},canDeactivate:[Tt]}]}]}];let be=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[{provide:f.sG,useValue:{parse:{dateInput:Z.ISO_8601},display:{dateInput:"ll",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}}],imports:[[d.Bz.forChild(xe),y._t,dt,L.ot,q.p9,x.FA,z.t,A.lN,S.Ps,$.c,w.Tx,gt.Yd,ht.Cv,_t.Fk,f.si,ft.LD,I.SJ,j.AV,vt.V,kt.m]]}),n})()}}]);